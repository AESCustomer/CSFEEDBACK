<!DOCTYPE html>
<html>
<head>
    <title>Super Simple Test</title>
</head>
<body>
    <button id="testButton">Test POST to Apps Script</button>
    <p id="responseArea"></p>

    <script>
        // ***** ใส่ URL ที่ได้จากการ Deploy Apps Script "Super Simple" ใหม่ล่าสุดที่นี่ *****
        const SUPER_SIMPLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbygbzF-HFjz17Gu9fPnpQpQslvuBnz_6VVUC9JrPcpV73QC27HMzhmvWvZ7zETxAjEI/exec';

        document.getElementById('testButton').addEventListener('click', function() {
            const responseArea = document.getElementById('responseArea');
            responseArea.textContent = 'Sending request...';
            console.log('Sending to:', SUPER_SIMPLE_SCRIPT_URL);

            fetch(SUPER_SIMPLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'cors', // ปล่อยให้เป็น cors (default)
                headers: {
                    // ไม่ต้องใส่ Content-Type Header ในตอนนี้ เพื่อให้เป็น Simple Request ที่สุด
                    // หรือจะลองใส่ 'Content-Type': 'text/plain' ก็ได้
                },
                body: "Hello from HTML" // ส่งข้อมูลเป็น text ธรรมดา
            })
            .then(response => {
                console.log('Raw Response:', response);
                responseArea.textContent = 'Status: ' + response.status + ' ' + response.statusText + '\n';
                if (!response.ok) {
                    return response.text().then(text => {
                        throw new Error('Server responded with an error: ' + text);
                    });
                }
                return response.text(); // Apps Script จะตอบกลับเป็น text
            })
            .then(data => {
                console.log('Success Data:', data);
                responseArea.textContent += 'Response Data: ' + data;
                alert('Success: ' + data);
            })
            .catch(error => {
                console.error('Fetch Error:', error);
                responseArea.textContent += 'Error: ' + error.message;
                alert('Error: ' + error.message);
            });
        });
    </script>
</body>
</html>
